# Chess deepseek-r1 vs Stockfish

This project demonstrates a chess environment where an deepseek-r1 (Large Language Model) competes against the Stockfish chess engine. The deepseek-r1 plays as White, and Stockfish plays as Black. The project uses Python libraries and the Stockfish chess engine to simulate a game.

## Features

- **deepseek-r1 Integration**: The deepseek-r1 is queried to generate moves using the `ollama` library.
- **Stockfish Engine**: Uses the Stockfish chess engine for AI-driven moves.
- **Customizable**: Adjustable Stockfish time limits and deepseek-r1 models.
- **Move Validation**: Ensures moves generated by the deepseek-r1 are legal.
- **Game State Management**: Tracks the chessboard state and game status (checkmate, stalemate, draw, etc.).

## Prerequisites

- Python 3.8+
- Stockfish chess engine installed on your system
- Required Python libraries (see [Installation](#installation) below)

## Installation

1. Install the required Python libraries:

   ```bash
   pip install chess loguru ollama
   ```

2. Install Stockfish on your system. For macOS with Homebrew:

   ```bash
   brew install stockfish
   ```

3. Update the `STOCKFISH_PATH` variable in the code to point to your Stockfish executable:

   ```python
   STOCKFISH_PATH = '/path/to/your/stockfish'
   ```

## Usage

Run the script to simulate a chess game between the deepseek-r1 and Stockfish:

```bash
python your_script_name.py
```

### Gameplay Flow

1. The game starts with a fresh board.
2. White (deepseek-r1) makes a move, which is validated and played.
3. Stockfish (Black) responds with its move.
4. The process repeats until the game ends in a win, draw, or illegal move.

### Key Classes

- **ChessEnv**: Manages the chessboard state, interacts with Stockfish, and handles move validation.
- **LLMChessAgent**: Generates moves for White using an deepseek-r1, ensuring valid UCI moves are returned.

### Customization

- **Time Limit**: Adjust the time Stockfish takes for each move by changing the `time_limit` parameter in `ChessEnv`.
- **deepseek-r1 Model**: Modify the deepseek-r1 model used by changing the `model` parameter in `deepseek-r1ChessAgent`.

## Example Output

```text
Final Board Position:
. . . k . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . . . . . .
. . . K . . . .
. . . . . . . .
. . . . . . . .

Game Status: DRAW

Move History:
You: e2e4
Opponent: e7e5
...
```

## Logging

- Logs are generated using the `loguru` library.
- Prompts and responses from the deepseek-r1, as well as move histories, are logged for debugging.

## Limitations

- The deepseek-r1's understanding of chess depends on its training and the prompt design.
- Requires a properly installed Stockfish executable.

## License

This project is licensed under the MIT License. See `LICENSE` for details.

## Acknowledgments

- [python-chess](https://python-chess.readthedocs.io): A Python chess library for board state management.
- [Stockfish](https://stockfishchess.org): The open-source chess engine used in this project.
- [ollama](https://ollama.ai): Library for interacting with deepseek-r1s.
